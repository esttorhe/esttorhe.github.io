<!DOCTYPE html>
<html lang="en"><head>
    <title> Esteban Torres | Xcode notifications on your üì± </title>
    <meta charset="utf-8"><meta name="generator" content="Hugo 0.85.0" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
    <meta name="description" content="&amp; this is my journey through engineering‚Ä¶">
    
    <link rel="stylesheet" href="https://estebantorr.es/css/style.min.dad68694f67c532e8ff0532b54c6e42b7ea1c4ef3c89f02db437fcf63ef9ff0f.css" integrity="sha256-2taGlPZ8Uy6P8FMrVMbkK36hxO88ifAttDf89j75/w8=" type="text/css">
    <link rel="stylesheet" href="https://estebantorr.es/assets/css/terminal.css" type="text/css"><link rel="stylesheet" href="https://estebantorr.es/assets/css/cv.css" type="text/css">
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <base href="https://estebantorr.es/">
    
    <link rel="shortcut icon" href="https://estebantorr.es/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="180x180" href="https://estebantorr.es/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://estebantorr.es/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://estebantorr.es/favicon-16x16.png">

    <link rel="canonical" href="https://estebantorr.es/blog/engineering/2018/02/2018-02-13-xcode-notifications-on-your-phone/">
</head><body><div class="sidebar animated fadeInDown">
    <div class="logo-title">
      <div class="title">
        <img src="https://estebantorr.es/assets/images/avatar.gif" alt="profile picture">
        <h3 title=""><a href="/">This is Esteban Torres</a></h3>
        <div class="description">
          <p>&amp; this is my journey through engineering‚Ä¶</p>
        </div>
      </div>
    </div>
    <ul class="social-links">
        
        <a href="https://www.linkedin.com/in/estebantorres" rel="me" >
          <i class="fa fa-linkedin" aria-hidden="true" title="Linkedin"></i>
        </a>
        
        <a href="https://github.com/esttorhe/" rel="me" >
          <i class="fa fa-github" aria-hidden="true" title="GitHub"></i>
        </a>
        
        <a href="mailto:me&#43;blog@estebantorr.es" rel="me" >
          <i class="fa fa-envelope" aria-hidden="true" title="e-mail"></i>
        </a>
        
    </ul>
    <div class="footer">
        <div class="by_farbox">&copy; Esteban Torres 2022 </div>
      </div>
    </div>
</div><div class="main">
            <div class="page-top animated fadeInDown">
    <div class="nav">
        
        
        <li><a  href="/" title="">Home</a></li>

        
        <li><a  href="/blog/" title="">Archive</a></li>

        
        <li><a  href="/about" title="">About Me</a></li>

        
        <li><a  href="/talks/" title="">Talks</a></li>

        
        <li><a  href="/cv" title="">CV</a></li>

        
    </div>
</div>
            <div class="autopagerize_page_element">
                <div class="content">
<div class="post animated fadeInDown">
    <div class="post-content">

      
      <div class="post-title">
        <h3>Xcode notifications on your üì±
        </h3>
        
        <div class="info">
          <i class="fa fa-sun-o"></i><span class="date">Tue, Feb 13, 2018</span>
          <i class="fa fa-clock-o"></i><span class="reading-time">3-minute read</span>
        </div>
        
      </div>
      

    <p>Since quite some time now I&rsquo;ve been working on <code>Xcode</code> projects that are pretty big; big enough to take up a considerable amount of time to finish compiling, even worst if you are running the tests and it needs to build EVERYTHING and then run ALL the tests.</p>
<p>I also like to multi-task and do some other stuff while I&rsquo;m compiling‚Ä¶</p>
<!-- [![xkcd comic about compilation times](https://imgs.xkcd.com/comics/compiling.png)](https://xkcd.com/303/) -->
<p><img src="https://imgs.xkcd.com/comics/compiling.png" alt="xkcd comic about compilation times"></p>
<p>For the longest time I thought about creating some sort of service that would let me hook up some push notifications whenever <code>Xcode</code> finished doing <em>X</em> or <em>Y</em> task but never came around actually creating it. Time passed and I basically forgot all about this dream of mine.</p>
<p>That is until today when I found out about <a href="https://github.com/dschep/ntfy"><code>ntfy</code></a>‚Ä¶</p>
<h1 id="ntfy">ntfy</h1>
<blockquote>
<p><code>ntfy</code> brings notification to your shell. It can automatically provide desktop notifications when long running commands finish or it can send push notifications to your phone when a specific command finishes.</p>
</blockquote>
<p><strong>TL,DR</strong>: <code>ntfy</code> is a <code>python</code> üêç  tool that sends notifications to different configurable backend services.</p>
<p><strong>TL;DR 2</strong>: <code>ntfy</code> is basically the service I wanted to build and never came around to actually making.</p>
<h2 id="installation">Installation</h2>
<p>The tool&rsquo;s <code>README</code> is pretty nicely done and comes with a <code>Quickstart</code> section that describes how to install it; unfortunately for me it didn&rsquo;t work due to some obscure error:</p>
<pre><code class="language-console" data-lang="console">Command &quot;python setup.py egg_info&quot; failed with error code 1
</code></pre><p>Which was easily sortable by running <code>pip3</code> instead of <code>pip</code> when installing; effectively making it:</p>


<div class="terminal">
  <header>
    <span class="controls">
      <i class="control control--red"></i>
      <i class="control control--yellow"></i>
      <i class="control control--green"></i>
    </span>
  </header>

  <main>
    
      
        <pre><code></code></pre>
      
    
      
        <code class="prompt">$</code>
        <code> sudo pip3 install ntfy</code>
      
    
      
        <pre><code></code></pre>
      
    
  </main>
</div>
<h1 id="hooking-it-into-xcode">Hooking it into <code>Xcode</code></h1>
<p>Now that the tool was installed on my machine it was just a matter of hooking it into <code>Xcode</code> behaviors (<em>Xcode -&gt; Preferences -&gt; Behaviors</em>)</p>
<p><img src="assets/images/post/2018/02/Xcode-notifications-on-your-phone/Xcode_Behaviors.png" alt="Xcode Preferences showing the Behaviors tab"></p>
<p>At the very bottom of the window there&rsquo;s a <code>Run</code> checkbox where you can choose a script/binary that you want to run whenever a behavior happens.</p>
<p>At first I had 1 script per behavior but then I discovered that there&rsquo;s an env variable that gets passed that has all the information I needed.</p>
<h2 id="available-variables">Available variables</h2>
<p>There are many variables that get passed to the binary/script; here&rsquo;s a redacted list of them from my own tests:</p>
<pre><code>Apple_PubSub_Socket_Render=&lt;REDACTED&gt;
CA_DEBUG_TRANSACTIONS=1
HOME=&lt;REDACTED&gt;
IDEAlertMessage=Build Succeeded
LOGNAME=&lt;REDACTED&gt;
MallocNanoZone=0
PATH=/Applications/Xcode-9.2.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin
PWD=&lt;REDACTED&gt;
SECURITYSESSIONID=&lt;REDACTED&gt;
SHELL=/usr/local/bin/zsh
SHLVL=1
SSH_AUTH_SOCK=&lt;REDACTED&gt;
TMPDIR=/var/folders/g1/&lt;REDACTED&gt;/T/
USER=estebantorres
XPC_FLAGS=0x0
XPC_SERVICE_NAME=0
XcodeDeveloperApplicationsDirectory=/Applications/Xcode-9.2.app/Contents/Developer/Applications
XcodeDeveloperDirectory=/Applications/Xcode-9.2.app/Contents/Developer
XcodeDeveloperPlatformsDirectory=/Applications/Xcode-9.2.app/Contents/Developer/Platforms
XcodeWorkspace=&lt;REDACTED&gt;.xcworkspace
XcodeWorkspacePath=/Users/estebantorres/&lt;REDACTED&gt;.xcworkspace
_=/usr/bin/env
__CF_USER_TEXT_ENCODING=0x1F6:0x0:0x0
</code></pre><p>Whenever a behavior gets executed (depending on which one) the script or binary you want to execute gets feed a set of environment variables; one of them being <code>IDEAlertMessage</code> which basically contains the message that <code>Xcode</code> displays (I also believe is the message that gets passed to the notification that <code>macOS</code> renders whenever <code>Xcode</code> starts, ends, fails to build or run tests; etc.)</p>
<p>As you can see the see <code>IDEAlertMessage</code> has everything I needed; is just a matter of calling <code>ntfy</code> with the contents of that variable and the <code>Xcode Workspace</code> and then you are set.</p>
<h2 id="script">Script</h2>
<p>If you don&rsquo;t want to play around this is the contents of my script:</p>
<p><code>ntfy.sh</code></p>


<div class="terminal">
  <header>
    <span class="controls">
      <i class="control control--red"></i>
      <i class="control control--yellow"></i>
      <i class="control control--green"></i>
    </span>
  </header>

  <main>
    
      
        <pre><code></code></pre>
      
    
      
        <pre><code>#! /bin/sh</code></pre>
      
    
      
        <pre><code></code></pre>
      
    
      
        <pre><code>/usr/local/bin/ntfy -b telegram send &#34;$XcodeWorkspace $IDEAlertMessage&#34;</code></pre>
      
    
      
        <pre><code></code></pre>
      
    
  </main>
</div>
<p><em>You might have noticed the <code>-b telegram</code> part. This you can check how to configure on <a href="https://github.com/dschep/ntfy"><code>ntfy</code></a>&rsquo;s <code>README</code>; if you don&rsquo;t want to use <code>Telegram</code> you can tweak it to use any of the other supported services.</em></p>
<h1 id="result">Result</h1>
<p><img src="assets/images/post/2018/02/Xcode-notifications-on-your-phone/notification.png" alt="macOS notification sent from Xcode using ntfy"></p>
<p>There are lots of room for improvement here, but this basically satisfy my needs; I can start building and or running my tests; leave to the cafeteria to grab a coffee and know wether or not the build passed or not without having to wait.</p>
<h2 id="why-this">Why this?</h2>
<p>You might not find this all that useful; and perhaps I won&rsquo;t either, but only time will tell.
For now I&rsquo;m quite happy with the results and pretend to take as much advantage as I can.</p>
    </div>
    <div class="post-footer">
      <div class="info">
        
<span class="separator"><a class="category" href="/categories/productivity/">productivity</a><a class="category" href="/categories/tools/">tools</a></span>

        
    <span class="separator"><a class="tag" href="/tags/xcode/">xcode</a><a class="tag" href="/tags/notifications/">notifications</a><a class="tag" href="/tags/ntfy/">ntfy</a></span>

      </div>
    </div>

    
           
    
</div>


                </div>
            </div>
        </div>
</body>



<script type="text/javascript" src="https://estebantorr.es/js/jquery.min.64d0083866906099f942140bc1c5cba4b1bf65783c52e4a63c5c46bf9dbc41f4.js" integrity="sha256-ZNAIOGaQYJn5QhQLwcXLpLG/ZXg8UuSmPFxGv528QfQ="></script>




<script type="text/javascript" src="https://estebantorr.es/js/bundle.min.45159b0e20ba3878972e064b7edc464c31a9e35a0d0a6a71e3fec84efdbe2ea5.js" integrity="sha256-RRWbDiC6OHiXLgZLftxGTDGp41oNCmpx4/7ITv2&#43;LqU="></script>

<script type="text/javascript" src="https://estebantorr.es/js/medium-zoom.min.7bb365126c575528e60bc143c2a650357e00255e3fa130d4f8519d6b1f66498d.js" integrity="sha256-e7NlEmxXVSjmC8FDwqZQNX4AJV4/oTDU&#43;FGdax9mSY0="></script>

<link rel="stylesheet" href="https://estebantorr.es/css/medium-zoom.min.34326a8121fc69fa1f802fcb0a0439a91ce2287cc2d5fc2a753c4b8affbae4c9.css" integrity="sha256-NDJqgSH8afofgC/LCgQ5qRziKHzC1fwqdTxLiv&#43;65Mk=" type="text/css"></html></body>

</html>
