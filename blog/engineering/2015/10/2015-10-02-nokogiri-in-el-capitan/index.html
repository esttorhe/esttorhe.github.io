<!DOCTYPE html>
<html lang="en"><head>
    <title> Esteban Torres | Nokogiri on El Capitan </title>
    <meta charset="utf-8"><meta name="generator" content="Hugo 0.85.0" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
    <meta name="description" content="&amp; this is my journey through engineeringâ€¦">
    
    <link rel="stylesheet" href="https://estebantorr.es/css/style.min.dad68694f67c532e8ff0532b54c6e42b7ea1c4ef3c89f02db437fcf63ef9ff0f.css" integrity="sha256-2taGlPZ8Uy6P8FMrVMbkK36hxO88ifAttDf89j75/w8=" type="text/css">
    <link rel="stylesheet" href="https://estebantorr.es/assets/css/terminal.css" type="text/css"><link rel="stylesheet" href="https://estebantorr.es/assets/css/cv.css" type="text/css">
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <base href="https://estebantorr.es/">
    
    <link rel="shortcut icon" href="https://estebantorr.es/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="180x180" href="https://estebantorr.es/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://estebantorr.es/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://estebantorr.es/favicon-16x16.png">

    <link rel="canonical" href="https://estebantorr.es/blog/engineering/2015/10/2015-10-02-nokogiri-in-el-capitan/">
</head><body><div class="sidebar animated fadeInDown">
    <div class="logo-title">
      <div class="title">
        <img src="https://estebantorr.es/assets/images/avatar.png" alt="profile picture">
        <h3 title=""><a href="/">This is Esteban Torres</a></h3>
        <div class="description">
          <p>&amp; this is my journey through engineeringâ€¦</p>
        </div>
      </div>
    </div>
    <ul class="social-links">
        
        <a href="https://www.linkedin.com/in/estebantorres" rel="me" >
          <i class="fa fa-linkedin" aria-hidden="true" title="Linkedin"></i>
        </a>
        
        <a href="https://github.com/esttorhe/" rel="me" >
          <i class="fa fa-github" aria-hidden="true" title="GitHub"></i>
        </a>
        
        <a href="mailto:me&#43;blog@estebantorr.es" rel="me" >
          <i class="fa fa-envelope" aria-hidden="true" title="e-mail"></i>
        </a>
        
    </ul>
    <div class="footer">
        <div class="by_farbox">&copy; Esteban Torres 2021 </div>
      </div>
    </div>
</div><div class="main">
            <div class="page-top animated fadeInDown">
    <div class="nav">
        
        
        <li><a  href="/" title="">Home</a></li>

        
        <li><a  href="/blog/" title="">Archive</a></li>

        
        <li><a  href="/about" title="">About Me</a></li>

        
        <li><a  href="/talks/" title="">Talks</a></li>

        
        <li><a  href="/cv" title="">CV</a></li>

        
    </div>
</div>
            <div class="autopagerize_page_element">
                <div class="content">
<div class="post animated fadeInDown">
    <div class="post-content">

      
      <div class="post-title">
        <h3>Nokogiri on El Capitan
        </h3>
        
        <div class="info">
          <i class="fa fa-sun-o"></i><span class="date">Fri, Oct 2, 2015</span>
          <i class="fa fa-clock-o"></i><span class="reading-time">3-minute read</span>
        </div>
        
      </div>
      

    <p>Finally <code>El Capitan</code> arrived and I couldn&rsquo;t be more eager to install it on my machine; as soon as I read on Twitter that it was available I jump to the <code>AppStore</code> and started the download process which seemed like a bad idea at the time:</p>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">I think downloading Â«El CapitanÂ» at the same time as the rest of the world was a BAD idea and poor judgement on my part ðŸ˜‚</p>&mdash; Esteban Torres (@esttorhe) <a href="https://twitter.com/esttorhe/status/649289668773715973?ref_src=twsrc%5Etfw">September 30, 2015</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>Fortunately it only took 1 hour and 30 minutes to download and around 30 minutes to install :/ Which seems like forever.</p>
<p>With <code>El Capitan</code> now on my computer and ready to keep working I went to my project to install some fancy new <code>pod</code>s of my own.</p>
<h1 id="my-work-configuration">My Â«work configurationÂ»</h1>
<p>The way I use <code>CocoaPods</code> is via <code>bundler</code>. I specify a <code>Gemfile</code> with some <code>CocoaPods</code> plugins and some other gems that I usually use on my day to day coding life and execute everything <code>CocoaPods</code> related with <code>bundle exec</code>. Just like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:3;-o-tab-size:3;tab-size:3"><code class="language-ruby" data-lang="ruby">bundle exec pod install
</code></pre></div><h1 id="enter-nokogiri">Enter <code>nokogiri</code></h1>
<p>For those of you that don&rsquo;t know what <code>Nokogiri</code> is here&rsquo;s an excerpt from their page:</p>
<blockquote>
<p><strong>Nokogiri</strong> (é‹¸) is an HTML, XML, SAX, and Reader parser. Among <strong>Nokogiri</strong>&rsquo;s many features is the ability to search documents via XPath or CSS3 selectors. XML is like violence - if it doesn&rsquo;t solve your problems, you are not using enough of it.</p>
</blockquote>
<p>Also if you didn&rsquo;t know <code>CocoaPods</code> uses <code>nokogiri</code> as a dependency; this means that, that if you want to Â«installÂ» <code>CocoaPods</code> you&rsquo;ll end up installing <code>nokogiri</code>.</p>
<h1 id="el-capitan-vs-nokogiri--fight"><code>El Capitan</code> vs. <code>nokogiri</code> =&gt; Fight!</h1>
<p>From some time I&rsquo;ve been facing the issue where I run:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:3;-o-tab-size:3;tab-size:3"><code class="language-ruby" data-lang="ruby">bundle install
</code></pre></div><p>And <code>nokogiri</code> fails to build because is missing <code>libxml2</code> path and that I should compile with system frameworks; which normally work, except that this time it completely failed to work and I was there unable to install my gems and/or run them using <code>bundle exec</code> stalling my work.</p>
<p>After checking the documentation I read that you could specify the path for some libraries, which wasn&rsquo;t working for me :/</p>
<p>I was able to install the gem with <code>gem install</code> but not with <code>bundler</code>.</p>
<p>It didn&rsquo;t took long for me to find a question on <code>StackOverflow</code> that addressed the same issue but for different versions of <code>nokogiri</code> and <code>Xcode</code> and it was just a matter of putting <code>2 + 2</code> together and finally my <code>bundle install</code> was successfully installing <code>CocoaPods</code> with <code>nokogiri</code> as a dependency.</p>
<p>Behold the Â«magicÂ» command:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:3;-o-tab-size:3;tab-size:3"><code class="language-ruby" data-lang="ruby">bundle config build<span style="color:#f92672">.</span>nokogiri <span style="color:#f92672">--</span>use<span style="color:#f92672">-</span>system<span style="color:#f92672">-</span>libraries<span style="color:#f92672">=</span><span style="color:#66d9ef">true</span> <span style="color:#f92672">--</span>with<span style="color:#f92672">-</span>xml2<span style="color:#f92672">-</span><span style="color:#66d9ef">include</span><span style="color:#f92672">=</span><span style="color:#e6db74">/Applications/</span><span style="color:#66d9ef">Xcode</span><span style="color:#f92672">.</span>app<span style="color:#f92672">/</span><span style="color:#66d9ef">Contents</span><span style="color:#f92672">/</span><span style="color:#66d9ef">Developer</span><span style="color:#f92672">/</span><span style="color:#66d9ef">Platforms</span><span style="color:#f92672">/</span><span style="color:#66d9ef">MacOSX</span><span style="color:#f92672">.</span>platform<span style="color:#f92672">/</span><span style="color:#66d9ef">Developer</span><span style="color:#f92672">/</span><span style="color:#66d9ef">SDKs</span><span style="color:#f92672">/</span><span style="color:#66d9ef">MacOSX10</span><span style="color:#f92672">.</span><span style="color:#ae81ff">11</span><span style="color:#f92672">.</span>sdk<span style="color:#f92672">/</span>usr<span style="color:#f92672">/</span><span style="color:#66d9ef">include</span><span style="color:#f92672">/</span>libxml2
</code></pre></div><p>You can see that all it&rsquo;s doing is specifying that <code>nokogiri</code> builds using system libraries and is also telling the full path for <code>libxml2</code> under <code>Xcode</code>&rsquo;s content folder.</p>
<h1 id="disclaimer">Disclaimer</h1>
<p>I honestly don&rsquo;t know if this is something that happens solely on <code>El Capitan</code>; I&rsquo;m guessing Â«noÂ» and that this fix should work with any instance of <code>OS X</code> as long as you have <code>Xcode</code>, else you&rsquo;ll have to specify a different path for your <code>libxml2</code>.</p>
    </div>
    <div class="post-footer">
      <div class="info">
        
<span class="separator"><a class="category" href="/categories/tools/">tools</a><a class="category" href="/categories/dependencies/">dependencies</a><a class="category" href="/categories/problem-solving/">problem solving</a></span>

        
    <span class="separator"><a class="tag" href="/tags/nokogiri/">nokogiri</a><a class="tag" href="/tags/gems/">gems</a><a class="tag" href="/tags/el-capitan/">el capitan</a><a class="tag" href="/tags/bug/">bug</a><a class="tag" href="/tags/fix/">fix</a></span>

      </div>
    </div>

    
           
    
</div>


                </div>
            </div>
        </div>
</body>



<script type="text/javascript" src="https://estebantorr.es/js/jquery.min.64d0083866906099f942140bc1c5cba4b1bf65783c52e4a63c5c46bf9dbc41f4.js" integrity="sha256-ZNAIOGaQYJn5QhQLwcXLpLG/ZXg8UuSmPFxGv528QfQ="></script>




<script type="text/javascript" src="https://estebantorr.es/js/bundle.min.45159b0e20ba3878972e064b7edc464c31a9e35a0d0a6a71e3fec84efdbe2ea5.js" integrity="sha256-RRWbDiC6OHiXLgZLftxGTDGp41oNCmpx4/7ITv2&#43;LqU="></script>

<script type="text/javascript" src="https://estebantorr.es/js/medium-zoom.min.7bb365126c575528e60bc143c2a650357e00255e3fa130d4f8519d6b1f66498d.js" integrity="sha256-e7NlEmxXVSjmC8FDwqZQNX4AJV4/oTDU&#43;FGdax9mSY0="></script>

<link rel="stylesheet" href="https://estebantorr.es/css/medium-zoom.min.34326a8121fc69fa1f802fcb0a0439a91ce2287cc2d5fc2a753c4b8affbae4c9.css" integrity="sha256-NDJqgSH8afofgC/LCgQ5qRziKHzC1fwqdTxLiv&#43;65Mk=" type="text/css"></html></body>

</html>
