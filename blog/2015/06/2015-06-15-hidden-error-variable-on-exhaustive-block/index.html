<!DOCTYPE html>
<html lang="en">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  
  
  
  
  
  <link rel="prev" href="https://estebantorr.es/blog/2015/06/2015-06-14-swift-2-dot-0-throws-tip/" />
  <link rel="next" href="https://estebantorr.es/blog/2015/06/2015-06-20-new-website/" />
  <link rel="canonical" href="https://estebantorr.es/blog/2015/06/2015-06-15-hidden-error-variable-on-exhaustive-block/" />
  <link rel='shortcut icon' type='image/x-icon' href='/favicon.ico' />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           Hidden error variable on exhaustive block | The mind of Esteban
       
  </title>
  <meta name="title" content="Hidden error variable on exhaustive block | The mind of Esteban">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Hidden error variable on exhaustive block"/>
<meta name="twitter:description" content="On my previous post I tried to help «solve» in a way the problem with non-typed throws by documenting them on the internal docs as lists with markdown.
Based on that you can rightfully assume that I&rsquo;m migrating all my Result&lt;T,U&gt; code to support throws instead, on my 2.0 branches.
As you might know (or not) whenever you do a do/catch block the catch block needs to be exhaustive; just like a switch and «catch» all possible paths.
It doesn&rsquo;t mean you necessarily need to specify every single error type in your catch block (even though ideally you should react differently for each type of error) but you can add an exhaustive catch that will represent «every single error»."/>

  <script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "Hidden error variable on exhaustive block",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https:\/\/estebantorr.es\/blog\/2015\/06\/2015-06-15-hidden-error-variable-on-exhaustive-block\/"
  },
  
  "genre": "post",
  "keywords": "swift2, swift, radar, bug",
  "wordcount":  417 ,
  "url": "https:\/\/estebantorr.es\/blog\/2015\/06\/2015-06-15-hidden-error-variable-on-exhaustive-block\/",
  "datePublished": "2015-06-15T22:15:03-06:00",
  "dateModified": "2015-06-15T22:15:03-06:00",
  
  "publisher": {
    "@type": "Organization",
    "name": "Esteban Torres",
    "logo": {
      "@type": "ImageObject",
      "url": "https:\/\/estebantorr.es\/assets\/images\/avatar.gif",
      "width":  40 ,
      "height":  40 
    }
  },
  "author": {
    "@type": "Person",
    "name": "Esteban Torres"
  },
  "description": ""
}
</script>
</head>

  



  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="https://estebantorr.es/">The mind of Esteban</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/" title="">Home</a>
                
                <a class="menu-item" href="/blog/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/talks/" title="">Talks</a>
                
                <a class="menu-item" href="/about" title="">About</a>
                
                <a class="menu-item" href="/cv" title="">CV</a>
                
                <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-sun"></i></a>&nbsp;
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-sun"></i></a>&nbsp;<a href="https://estebantorr.es/">The mind of Esteban</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/" title="">Home</a>
                
                <a class="menu-item" href="/blog/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/talks/" title="">Talks</a>
                
                <a class="menu-item" href="/about" title="">About</a>
                
                <a class="menu-item" href="/cv" title="">CV</a>
                
        </div>
    </div>
</nav>

    	 <main class="main">
          <div class="container">
      		
<article class="post-warp">
    <header class="post-header">
        <h1 class="post-title">Hidden error variable on exhaustive block</h1>
        <div class="post-meta">
            Written by <a href="https://estebantorr.es/" rel="author">Esteban Torres</a> with ♥ 
                <span class="post-time">
                    on <time datetime=2015-06-15 >15 June 2015</time>
                </span>
                in
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        <a href="https://estebantorr.es/categories/ios-engineering/"> iOS Engineering </a>
                        <a href="https://estebantorr.es/categories/engineering/"> Engineering </a>
                        
                </span>
                <i class="iconfont icon-timer"></i>
                2 min
        </div>
    </header>
    <div class="post-content">
        

        

        <img src="https://www.appfutura.com/uploads/blog/2015/09/Apple-Swift-2.0-1024x640.jpg" class="featured_image">
        
        
     
          
          
          

          
          
          

          <p>On my <a href="/blog/2015/06/swift-2.0-throws-tip/">previous post</a> I tried to help «solve» in a way the problem with non-typed <code>throws</code> by documenting them on the internal docs as lists with <code>markdown</code>.</p>
<p>Based on that you can rightfully assume that I&rsquo;m migrating all my <code>Result&lt;T,U&gt;</code> code to support <code>throws</code> instead, on my <code>2.0</code> branches.</p>
<p>As you might know (or not) whenever you do a <code>do</code>/<code>catch</code> block the <code>catch</code> block needs to be exhaustive; just like a <code>switch</code> and «catch» <em>all</em> possible paths.</p>
<p>It doesn&rsquo;t mean you <strong>necessarily</strong> need to specify every single error type in your <code>catch</code> block (even though ideally you should react differently for each type of error) but you can add an exhaustive <code>catch</code> that will represent «every single error».</p>
<h1 id="the-problem">The Problem</h1>
<p>Apparently <code>Swift</code> internally «reserves» the <code>error</code> variable on the exhaustive <code>catch</code> block without documenting it anywhere on the book.</p>
<p>To provide context copy and paste the following code in an empty <code>Playground</code> on <code>Xcode 7</code> and see how the compiler complains with the message:</p>
<blockquote>
<p>Cannot assign to &lsquo;let&rsquo; value &lsquo;error&rsquo;</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:3;-o-tab-size:3;tab-size:3"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">TestError</span>: ErrorType {
  <span style="color:#66d9ef">case</span> HiddenErrorVariable
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">throwingFunction</span>() <span style="color:#66d9ef">throws</span> -&gt; () {
  <span style="color:#66d9ef">throw</span> TestError.HiddenErrorVariable
}

<span style="color:#66d9ef">let</span> error: TestError
<span style="color:#66d9ef">do</span> {
  <span style="color:#66d9ef">try</span> throwingFunction()
} <span style="color:#66d9ef">catch</span> {
  error = TestError.HiddenErrorVariable

  print(error)
}

print(error)
</code></pre></div><hr>
<p>Keep in mind that this is an oversimplified and reduced code to demonstrate the issue; I&rsquo;m well aware that without that compile complain it will still complain about using <code>error</code> without being initialized.</p>
<hr>
<h1 id="what-now">What now?</h1>
<p>For now the workaround is simple; avoid using a <code>let error</code> near an exhaustive <code>catch</code> block. Although that&rsquo;s not quite a solution but a patch; with some luck <code>Apple</code> will eventually fix this issue; <code>Swift 2.0</code> its still a ß and can contain a fix for this (or at least document it somewhere other than this blog post) by the time it hits production.</p>
<p>In the meantime I filed a radar <a href="http://openradar.appspot.com/21396321"><code>rdar://21396321</code></a> explaining the issue and also asked <a href="https://twitter.com/jckarter">Joe Groff</a> (he works on <code>Swift</code> compiler at <code>Apple</code>) about this and will update when (if) he answers:</p>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr"><a href="https://twitter.com/jckarter?ref_src=twsrc%5Etfw">@jckarter</a> is the `error` reservation on exhaustive `catch` documented anywhere - <a href="http://t.co/qgGm1tlX4i">http://t.co/qgGm1tlX4i</a> ? Or a bug?</p>&mdash; Esteban Torres (@esttorhe) <a href="https://twitter.com/esttorhe/status/610667900421152768?ref_src=twsrc%5Etfw">June 16, 2015</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<h2 id="update">Update</h2>
<p>Well; <a href="https://twitter.com/jckarter">Joe</a> answered quicker than expected:</p>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr"><a href="https://twitter.com/esttorhe?ref_src=twsrc%5Etfw">@esttorhe</a> It intentionally implicitly binds an &quot;error&quot; variable if you specified none.</p>&mdash; Joe Groff (@jckarter) <a href="https://twitter.com/jckarter/status/610668658105413633?ref_src=twsrc%5Etfw">June 16, 2015</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>Apparently it is intentional (which is good) but is not documented anywhere.</p>
<p>I suggested adding it to the book/docs and he agreed; perhaps we will see a fix for it before it hits production.</p>
    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>Esteban Torres </span>
                </p>
            
           
            <p class="copyright-item">
                    <span>Words:</span>
                   <span>417</span>
            </p>

            <p class="copyright-item">
                
                <span>Share:</span>
                <span>

      
        <a href="//twitter.com/share?url=https%3a%2f%2festebantorr.es%2fblog%2f2015%2f06%2f2015-06-15-hidden-error-variable-on-exhaustive-block%2f&amp;text=Hidden%20error%20variable%20on%20exhaustive%20block&amp;via=esttorhe" target="_blank" title="Share on Twitter">
          <i class="iconfont icon-twitter"></i>
        </a>
        
      
      
      
      
        <a href="//reddit.com/submit?url=https%3a%2f%2festebantorr.es%2fblog%2f2015%2f06%2f2015-06-15-hidden-error-variable-on-exhaustive-block%2f&amp;title=Hidden%20error%20variable%20on%20exhaustive%20block" target="_blank" title="Share on Reddit">
          <i class="iconfont icon-reddit"></i>
        </a>
        
      
      
        <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2festebantorr.es%2fblog%2f2015%2f06%2f2015-06-15-hidden-error-variable-on-exhaustive-block%2f&amp;title=Hidden%20error%20variable%20on%20exhaustive%20block" target="_blank" title="Share on LinkedIn">
          <i class="iconfont icon-linkedin"></i>
        </a>
        
      
      
        
      
        <a href="//news.ycombinator.com/submitlink?u=https%3a%2f%2festebantorr.es%2fblog%2f2015%2f06%2f2015-06-15-hidden-error-variable-on-exhaustive-block%2f&amp;description=Hidden%20error%20variable%20on%20exhaustive%20block" target="_blank" title="Share on Hacker News">
          <i class="iconfont icon-ycombinator"></i>
        </a>
        
        
      

          

          

          

          

</span>
                
            </p>

            
    </div>

  
    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-icon-tag"></i>Tag: 
            
            <span class="tag"><a href="https://estebantorr.es/tags/swift2/">
                    #swift2</a></span>
            
            <span class="tag"><a href="https://estebantorr.es/tags/swift/">
                    #swift</a></span>
            
            <span class="tag"><a href="https://estebantorr.es/tags/radar/">
                    #radar</a></span>
            
            <span class="tag"><a href="https://estebantorr.es/tags/bug/">
                    #bug</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">Back</a></span> · 
                <span><a href="https://estebantorr.es/">Home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://estebantorr.es/blog/2015/06/2015-06-14-swift-2-dot-0-throws-tip/" class="prev" rel="prev" title="Swift 2.0 - throws tip"><i class="iconfont icon-dajiantou"></i>&nbsp;Swift 2.0 - throws tip</a>
         
        
        <a href="https://estebantorr.es/blog/2015/06/2015-06-20-new-website/" class="next" rel="next" title="New Website">New Website&nbsp;<i class="iconfont icon-xiaojiantou"></i></a>
        
    </div>

    <div class="post-comment">
          
          

 <script src="https://utteranc.es/client.js"
        repo='esttorhe/esttorhe.github.io'
        issue-term='title'
        label='Comments'
        theme='icy-dark'
        crossorigin="anonymous"
        async>
  </script>

          
    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2014 - 2022</span>
        
         
            <span class="author" itemprop="copyrightHolder"><a href="https://estebantorr.es/">Esteban Torres</a> | </span>
         

		  <span>Crafted with ❤️ by <a href="https://github.com/Fastbyte01/KeepIt" target="_blank" rel="external nofollow noopener noreffer">KeepIt</a> & <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreffer">Hugo</a></span>
    </div>
</footer>












    
    
    <script src="/js/vendor_no_gallery.min.js" async=""></script>
    
  







     </div>
  </body>
</html>
